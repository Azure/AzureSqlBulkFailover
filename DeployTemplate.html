<!DOCTYPE html>
<html>
<head>
    <title>Deploy AzureSqlBulkFailover runbook to your Azure Subscription</title>
</head>
<body>
    <h1>Deploy AzureSqlBulkFailover runbook to your Azure Subscription.</h1>
    <p>Use this template to deploy the AzureSqlBulkFailover runbook to your Azure Subscription. Note that if you have already installed it you must manually uninstall it from your subscription before reinstalling.</p>
    <img src="https://aka.ms/deploytoazurebutton" 
             style="background-repeat: no-repeat; 
                            background-position: center; 
                            background-color: transparent; 
                            background-size: contain; 
                            width: 200px; 
                            height: 41px; 
                            border: none; 
                            cursor: hand;">
    <script>
        function deployTemplate() {
            const branchName = "main";
            const url = location.href;
            if (url.startsWith("https://github.com/")) {
                branchName = url.substring(url.indexOf("blob/") + 5, url.indexOf("/DeployTemplate.html"));
            }
            const escapedUrl = "https://portal.azure.com/#blade/Microsoft_Azure_CreateUIDef/CustomDeploymentBlade/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2FAzureSqlBulkFailover%2F" + escape(branchName) + "%2FSource%2FArmTemplate.json";
            const xhr = new XMLHttpRequest();
            xhr.open("PUT", escapedUrl, true);
            xhr.setRequestHeader("Content-Type", "application/json");
            xhr.onreadystatechange = function() {
                if (xhr.readyState === 4 && xhr.status === 200) {
                    console.log("Template deployed successfully.");
                }
            };
            xhr.send(JSON.stringify({}));
        }
    </script>
</body>
</html>